jQuery(document).ready(function(n){var a={delegateRule:function(i,r,e,t,d){"group"===e.type?Array.isArray(e.conditions)&&e.conditions.forEach(function(e){a.delegateRule(i,r,e,t,d)}):(e='.ur-field-item[data-field-id="'+e.triggerer_id+'"]  .ur-input-checkbox, .ur-frontend-field, .form-row#user_registration_'+e.triggerer_id+'_field .urwc-field-input, .ur-field-item[data-field-id="'+e.triggerer_id+'"] .urwc-field-input, .ur-field-item[data-field-id="'+e.triggerer_id+'"] .ur-edit-profile-field',d.on("change keyup",e,function(){a.run(r,t,d)}))},run:function(e,i,r){var t=a.evaluateCondition(i.logic_map,r),d=r.find('.ur-field-item[data-field-id="'+e+'"]'),n=r.find("#urcl_hide_fields").val(),n=new Set(n?JSON.parse(n):[]);0===d.length&&(d=r.find(".form-row#"+e)),(t?"hide"===i.action?(d.hide(),!0):(d.show(),!1):"hide"===i.action?(d.show(),!1):(d.hide(),!0))?n.add(e):n["delete"](e),r.find("#urcl_hide_fields").val(JSON.stringify(Array.from(n)))},getFieldValue:function(e,i){e=i.find('.ur-field-item[data-field-id="'+e+'"]'),i=e.find(".ur-frontend-field").length?e.find(".ur-frontend-field"):e.find(".ur-edit-profile-field");if(e.find(".urwc-field-input").length&&(i=e.find(".urwc-field-input")),e.is(".field-checkbox")||"checkbox"===i.attr("type")){var r=[];return i.parent().find(":checked").each(function(){r.push(n(this).val())}),r}return e.is(".field-radio")||"radio"===i.attr("type")?i.parent().find(":checked").val():e.is(".field-privacy_policy")||e.is(".field-mailchimp")||e.is(".field-separate_shipping")?i.is(":checked")?"checked":"unchecked":i.val()},evaluateCondition:function(e,i){if("group"===e.type){if(Array.isArray(e.conditions)){e.logic_gate&&""!==e.logic_gate||(e.logic_gate="OR");for(var r=0;r<e.conditions.length;r++){var t=e.conditions[r],t=this.evaluateCondition(t,i);if("OR"===e.logic_gate&&!0===t)return!0;if("AND"===e.logic_gate&&!1===t)return!1;if("NOT"===e.logic_gate&&!0===t)return!1}return"OR"===e.logic_gate?!1:"AND"===e.logic_gate||"NOT"===e.logic_gate}return!0}var d=e.value,n=this.getFieldValue(e.triggerer_id,i);return!!a.resolveOperator(d,n,e.operator)},resolveOperator:function(e,i,r){switch(r){case"is":return Array.isArray(e)&&Array.isArray(i)?a.compareArrays(e,i):Array.isArray(i)?i.includes(e):e===i;case"is_not":return Array.isArray(e)&&Array.isArray(i)?a.compareArrays(e,i):Array.isArray(i)?!i.includes(e):e!==i;default:return!1}},compareArrays:function(e,i){if(e.length!==i.length)return!1;for(var r=0;r<e.length;r++){var t=e[r];if(!i.includes(t))return!1}return!0}};n(document).on("user_registration_frontend_before_form_submit",function(e,i,r,t){var d=n("#urcl_hide_fields");null!=d&&0<d.length&&(i.urcl_hide_fields=d.val())}),n(".urcl-hide-field").closest(".ur-field-item").hide(),n(".urcl-hide-field").removeAttr("required"),n("form, .user-registration").each(function(){var t,e,i,r;(n(this).is(".register")||n(this).is(".user-registration-EditProfileForm")||n(this).is(".user-registration"))&&(r=n(this).data("form-id"),t=n(r?'form[data-form-id="'+r+'"':this),0===(e=n(this).find(".ur-field-item")).length&&(e=n(this).find(".form-row")),(i=document.createElement("input")).setAttribute("type","hidden"),i.setAttribute("id","urcl_hide_fields"),i.setAttribute("name","urcl_hide_fields"),i.setAttribute("value",""),(r=document.querySelector("#user-registration-form-"+r+" form.register"))&&r.appendChild(i),e.each(function(){if("yes"===n(this).data("conditional-logic-enabled")){var e=n(this).data("conditional-logic-map"),i=(i=n(this).data("field-id"))||n(this).attr("id");if("object"!=typeof e)try{e=JSON.parse(e)}catch(r){}e&&""!==e&&"object"==typeof e&&(a.run(i,e,t),a.delegateRule(e.action,i,e.logic_map,e,t))}}))})});